<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GROVE | MS Pipe Cut Length Calculator</title>

<style>
/* === SAME STYLES AS BEFORE — UNCHANGED === */
:root{
  --bg:#070707;
  --line:rgba(255,255,255,.12);
  --text:#f5f5f5;
  --muted:rgba(255,255,255,.65);
  --red:#ef2a1f;
  --radius:22px;
  --shadow:0 20px 60px rgba(0,0,0,.55);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--text);
  background:var(--bg);
  min-height:100vh;
  padding:24px;
  overflow-x:hidden;
}
.bgGlow{
  position:fixed; inset:-40%;
  background:
    radial-gradient(900px 500px at 15% 15%, rgba(239,42,31,.14), transparent 60%),
    radial-gradient(700px 450px at 85% 35%, rgba(255,255,255,.05), transparent 60%);
  filter: blur(14px);
  animation: float 12s ease-in-out infinite alternate;
  pointer-events:none;
  z-index:-3;
}
@keyframes float{ from{transform:translate(-1%,-1%)} to{transform:translate(1%,1%)} }

.wrap{max-width:1000px;margin:0 auto;position:relative}
.page{opacity:0;transform:translateY(6px);transition:all .3s ease}
.page.is-ready{opacity:1;transform:none}

select,input,textarea{
  width:100%;padding:14px;border-radius:14px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.05);
  color:var(--text);
  font-size:15px;
}

.resultValue{font-size:38px;font-weight:1000}

/* (UI styles omitted here for brevity — they are identical to your current working version) */
</style>
</head>

<body>
<script>
if (sessionStorage.getItem("cutcalc_ok") !== "1") {
  window.location.href = "index.html";
}
</script>

<div class="wrap page" id="page">
<h1>Pipe Cut Length Calculator</h1>

<label>Pipe Size</label>
<select id="size"></select>

<label>End A</label>
<select id="endA"></select>

<label>End B</label>
<select id="endB"></select>

<label>CTC (mm)</label>
<input id="ctc" type="number" placeholder="e.g. 1200">

<div class="resultValue" id="cut">—</div>
<div id="formula"></div>
</div>

<script>
requestAnimationFrame(()=>document.getElementById("page").classList.add("is-ready"));

/* === UPDATED DATA WITH SR / LR / 45 === */
const DATA = {
  '2"':  { flangeA:null, elbowSR:76,  elbowLR:95,  elbow45:38,  teeD:64,  teeE:128 },
  '3"':  { flangeA:20,   elbowSR:102, elbowLR:114, elbow45:51,  teeD:86,  teeE:172 },
  '4"':  { flangeA:20,   elbowSR:127, elbowLR:152, elbow45:64,  teeD:105, teeE:210 },
  '6"':  { flangeA:20,   elbowSR:190, elbowLR:229, elbow45:95,  teeD:143, teeE:286 },
  '8"':  { flangeA:25,   elbowSR:254, elbowLR:305, elbow45:127, teeD:178, teeE:356 }
};

const FITTINGS = [
  { key:"flangeA", label:"Flange (A)", weld:false },
  { key:"elbowSR", label:"90° Elbow – Short Radius", weld:true },
  { key:"elbowLR", label:"90° Elbow – Long Radius", weld:true },
  { key:"elbow45", label:"45° Elbow", weld:true },
  { key:"teeD",    label:"Tee (D)", weld:true },
  { key:"teeE",    label:"Tee (E)", weld:true }
];

const WELD_GAP = 3;

const sizeSel = document.getElementById("size");
const endA = document.getElementById("endA");
const endB = document.getElementById("endB");
const ctcEl = document.getElementById("ctc");
const cutEl = document.getElementById("cut");
const formulaEl = document.getElementById("formula");

function buildSizes(){
  sizeSel.innerHTML="";
  Object.keys(DATA).forEach(s=>{
    const o=document.createElement("option");
    o.value=s;o.textContent=s;
    sizeSel.appendChild(o);
  });
}

function buildFittings(){
  endA.innerHTML=""; endB.innerHTML="";
  const row = DATA[sizeSel.value];

  FITTINGS.forEach(f=>{
    const val=row[f.key];
    const text = val==null ? `${f.label} — N/A` : f.label;

    const oa=document.createElement("option");
    oa.value=f.key; oa.textContent=text;
    if(val==null) oa.disabled=true;
    endA.appendChild(oa);

    const ob=oa.cloneNode(true);
    endB.appendChild(ob);
  });

  endA.value="elbowLR";
  endB.value="elbowLR";
}

function calc(){
  const row=DATA[sizeSel.value];
  const ctc=Number(ctcEl.value);
  if(!ctc){ cutEl.textContent="—"; formulaEl.textContent=""; return; }

  function off(k){
    const f=FITTINGS.find(x=>x.key===k);
    return row[k] + (f.weld ? WELD_GAP : 0);
  }

  const cut = ctc - (off(endA.value) + off(endB.value));
  cutEl.textContent = cut.toFixed(1)+" mm";
  formulaEl.textContent = `CTC − (${off(endA.value)} + ${off(endB.value)})`;
}

buildSizes();
buildFittings();
sizeSel.onchange=()=>{buildFittings();calc()};
endA.onchange=calc;
endB.onchange=calc;
ctcEl.oninput=calc;
</script>
</body>
</html>
