<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GROVE | MS Pipe Cut Length Calculator</title>

  <style>
    :root{
      --bg:#070707;
      --line:rgba(255,255,255,.12);
      --text:#f5f5f5;
      --muted:rgba(255,255,255,.65);
      --red:#ef2a1f;
      --radius:22px;
      --shadow:0 20px 60px rgba(0,0,0,.55);
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:var(--bg);
      min-height:100vh;
      padding:24px;
      overflow-x:hidden;
    }

    /* background glow */
    .bgGlow{
      position:fixed; inset:-40%;
      background:
        radial-gradient(900px 500px at 15% 15%, rgba(239,42,31,.14), transparent 60%),
        radial-gradient(700px 450px at 85% 35%, rgba(255,255,255,.05), transparent 60%);
      filter: blur(14px);
      animation: float 12s ease-in-out infinite alternate;
      pointer-events:none;
      z-index:-2;
    }
    @keyframes float{
      from{ transform: translate(-1%, -1%) }
      to  { transform: translate( 1%,  1%) }
    }

    .wrap{max-width:1000px;margin:0 auto;position:relative;}

    /* watermark */
    .wm-center{
      position:absolute;
      left:50%;
      top:55%;
      width:72%;
      max-width:760px;
      transform: translate(-50%, -50%);
      pointer-events:none;
      z-index:-1;
      animation: drift 18s ease-in-out infinite alternate;
    }
    .wm-center img{
      width:100%;
      height:auto;
      opacity:.10;
      filter: grayscale(100%) contrast(115%);
      position:relative;
      z-index:2;
    }
    .wm-glow{
      position:absolute;
      inset:-20%;
      background: radial-gradient(
        circle at center,
        rgba(255,255,255,.25),
        rgba(255,255,255,0) 65%
      );
      filter: blur(14px);
      z-index:1;
    }
    @keyframes drift{
      from{ transform: translate(-50%, -53%) scale(1); }
      to  { transform: translate(-50%, -47%) scale(1.03); }
    }

    /* header */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:16px;
    }
    .logoPlate{
      background:#fff;
      padding:10px 14px;
      border-radius:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.35);
      display:flex;
      align-items:center;
    }
    .logoPlate img{height:46px;width:auto;}

    .topRight{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      font-size:12px;
      font-weight:800;
      color:var(--muted);
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:9px 12px;
      border-radius:999px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .dot{
      width:9px;height:9px;border-radius:50%;
      background:var(--red);
      box-shadow:0 0 0 5px rgba(239,42,31,.18);
      animation:pulse 1.8s ease infinite;
    }
    @keyframes pulse{50%{transform:scale(1.1)}}

    .version{
      font-size:11px;
      font-weight:700;
      color:rgba(255,255,255,.55);
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
    }
    .btnSmall{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      font-weight:900;
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
    }

    /* card */
    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
      z-index:1;
    }

    .cardHead{
      padding:18px 22px;
      border-bottom:1px solid var(--line);
      background:rgba(0,0,0,.22);
    }
    h1{margin:0 0 6px;font-size:24px;}
    .sub{margin:0;color:var(--muted);line-height:1.6;}

    .content{
      padding:18px 22px 22px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:16px;
    }
    @media(max-width:900px){
      .content{grid-template-columns:1fr}
      .wm-center{display:none;} /* hide watermark on small screens */
    }

    .block{
      border:1px solid var(--line);
      border-radius:18px;
      background:rgba(0,0,0,.20);
      padding:14px;
    }
    .blockTitle{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      margin-bottom:10px;
    }
    .stepNum{
      width:28px;height:28px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      background:rgba(239,42,31,.18);
      border:1px solid rgba(239,42,31,.35);
      color:#fff;
      font-weight:900;
      font-size:13px;
    }

    label{
      display:block;
      font-size:12px;
      font-weight:900;
      color:rgba(255,255,255,.78);
      margin:10px 0 6px;
    }
    select,input{
      width:100%;
      padding:14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      font-size:15px;
    }
    select option{background:#111;color:#fff;}
    input::placeholder{color:rgba(255,255,255,.35)}

    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    @media(max-width:700px){.row2{grid-template-columns:1fr}}

    .help{margin-top:10px;color:rgba(255,255,255,.55);font-size:12px;line-height:1.5;}

    .resultCard{
      border:1px solid rgba(239,42,31,.35);
      background: rgba(239,42,31,.08);
      border-radius:18px;
      padding:16px;
    }
    .resultLabel{font-size:12px;font-weight:900;color:rgba(255,255,255,.7);}
    .resultValue{margin-top:6px;font-size:38px;font-weight:1000;}
    .resultMeta{margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;font-size:12px;color:rgba(255,255,255,.7);}
    .metaPill{border:1px solid var(--line);background:rgba(255,255,255,.03);padding:7px 10px;border-radius:999px;}

    .copyRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;}
    .btnPrimary{
      border:none;
      font-weight:900;
      padding:13px 14px;
      border-radius:14px;
      background: linear-gradient(180deg, #ff3b30, var(--red));
      color:#fff;
      cursor:pointer;
      flex:1;
      min-width:160px;
    }
    .btnGhost{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      font-weight:900;
      padding:13px 14px;
      border-radius:14px;
      cursor:pointer;
      flex:1;
      min-width:160px;
    }
    .btnGhost:disabled{opacity:.5;cursor:not-allowed;}
    .toast{margin-top:10px;font-size:12px;color:rgba(255,255,255,.7);display:none;}

    .footer{
      border-top:1px solid var(--line);
      padding:14px 22px;
      font-size:12px;
      color:rgba(255,255,255,.45);
      display:flex;
      justify-content:space-between;
      background: rgba(0,0,0,.18);
    }
  </style>
</head>

<body>
<div class="bgGlow"></div>

<script>
if(sessionStorage.getItem("cutcalc_ok")!=="1"){
  window.location.href="index.html";
}
function logout(){
  sessionStorage.removeItem("cutcalc_ok");
  window.location.href="index.html";
}
</script>

<div class="wrap">

  <!-- WATERMARK -->
  <div class="wm-center" aria-hidden="true">
    <div class="wm-glow"></div>
    <img src="grove-logo.png" alt="">
  </div>

  <div class="topbar">
    <div class="logoPlate">
      <img src="grove-logo.png" alt="GROVE Services Ltd">
    </div>
    <div class="topRight">
      <div class="pill"><span class="dot"></span>MS Pipes • Calculator</div>
      <div class="version">Standard v1.0 • Sep 2025</div>
      <button class="btnSmall" onclick="window.location.href='pipe-type.html'">← Pipe Type</button>
      <button class="btnSmall" onclick="logout()">Exit</button>
    </div>
  </div>

  <div class="card">
    <div class="cardHead">
      <h1>Pipe Cut Length Calculator</h1>
      <p class="sub">Select fitting types for both ends, enter centre-to-centre, and the cut length updates automatically.</p>
    </div>

    <div class="content">
      <!-- Inputs -->
      <div class="block">
        <div class="blockTitle"><div class="stepNum">1</div> Pipe size</div>
        <label>Pipe Size</label>
        <select id="size"></select>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.1);margin:14px 0;">

        <div class="blockTitle"><div class="stepNum">2</div> Fittings (Both Ends)</div>
        <div class="row2">
          <div><label>End A</label><select id="endA"></select></div>
          <div><label>End B</label><select id="endB"></select></div>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.1);margin:14px 0;">

        <div class="blockTitle"><div class="stepNum">3</div> Measurement</div>
        <label>Centre-to-centre (mm)</label>
        <input id="ctc" type="number" placeholder="e.g. 1200">
        <div class="help">Auto-calculation is ON.</div>
      </div>

      <!-- Result -->
      <div class="block">
        <div class="blockTitle"><div class="stepNum">✓</div> Result</div>

        <div class="resultCard">
          <div class="resultLabel">Cut length</div>
          <div id="cut" class="resultValue">—</div>
          <div id="formula" class="help"></div>
          <div id="meta" class="resultMeta"></div>

          <div class="copyRow">
            <button id="copyBtn" class="btnGhost" disabled onclick="copyResult()">Copy Result</button>
            <button class="btnPrimary" onclick="resetAll()">Reset</button>
          </div>
          <div id="toast" class="toast">Copied ✅</div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div>© GROVE Services Ltd.</div>
      <div>Internal use only</div>
    </div>
  </div>
</div>

<script>
/* DATA + LOGIC (unchanged, trimmed for clarity) */
const DATA={
  '2"':{id:50,od:60.3,elbow:76,teeD:64,teeE:128},
  '3"':{id:80,od:88.9,elbow:114,teeD:86,teeE:172},
  '4"':{id:100,od:114.3,elbow:152,teeD:105,teeE:210}
};
const FIT=[{k:"elbow",l:"90° Elbow"},{k:"teeD",l:"Tee (D)"},{k:"teeE",l:"Tee (E)"}];

const size=document.getElementById("size"),
      a=document.getElementById("endA"),
      b=document.getElementById("endB"),
      ctc=document.getElementById("ctc"),
      cut=document.getElementById("cut"),
      meta=document.getElementById("meta"),
      copyBtn=document.getElementById("copyBtn"),
      toast=document.getElementById("toast");

Object.keys(DATA).forEach(s=>{
  size.innerHTML+=`<option value="${s}">${s}</option>`;
});
FIT.forEach(f=>{
  a.innerHTML+=`<option value="${f.k}">${f.l}</option>`;
  b.innerHTML+=`<option value="${f.k}">${f.l}</option>`;
});
a.value=b.value="elbow";

function calc(){
  const r=DATA[size.value];
  const v=Number(ctc.value);
  if(!v){cut.textContent="—";copyBtn.disabled=true;return;}
  const res=v-(r[a.value]+r[b.value]);
  cut.textContent=res.toFixed(1)+" mm";
  meta.innerHTML=`<div class="metaPill">${size.value}</div>`;
  copyBtn.disabled=false;
}
[size,a,b,ctc].forEach(el=>el.addEventListener("input",calc));

function copyResult(){
  navigator.clipboard.writeText(cut.textContent);
  toast.style.display="block";
  setTimeout(()=>toast.style.display="none",1200);
}
function resetAll(){
  ctc.value="";
  cut.textContent="—";
  copyBtn.disabled=true;
}
</script>
</body>
</html>
